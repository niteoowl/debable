<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í† ë¡  ê°œì„¤ | Debable</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .create-steps {
            display: flex;
            margin-bottom: 32px;
        }

        .create-step {
            flex: 1;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border-color);
            text-align: center;
            font-size: 13px;
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            transition: color 0.2s;
        }

        .create-step.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .create-step.completed {
            color: var(--text-main);
            border-bottom-color: var(--text-main);
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .form-section {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        .form-label .required {
            color: #EF4444;
        }

        .form-label .char-count {
            float: right;
            font-weight: 400;
            color: var(--text-light);
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 15px;
            background: white;
            transition: border-color 0.2s;
            font-family: inherit;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-helper {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 6px;
        }

        .option-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .option-card {
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.15s;
            background: white;
        }

        .option-card:hover {
            border-color: var(--text-light);
        }

        .option-card.selected {
            border-color: var(--primary);
            background: var(--primary-bg);
        }

        .option-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .option-title {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .option-card.selected .option-title {
            color: var(--primary);
        }

        .option-desc {
            font-size: 11px;
            color: var(--text-light);
        }

        .time-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .time-btn {
            padding: 10px 16px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            background: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .time-btn:hover {
            border-color: var(--text-light);
        }

        .time-btn.selected {
            background: var(--text-main);
            color: white;
            border-color: var(--text-main);
        }

        .btn-row {
            display: flex;
            gap: 12px;
            margin-top: 32px;
        }

        .btn {
            flex: 1;
            padding: 16px;
            border-radius: var(--radius-md);
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.15s;
            border: none;
        }

        .btn-secondary {
            background: var(--bg-surface);
            color: var(--text-sub);
        }

        .btn-primary {
            background: var(--text-main);
            color: white;
        }

        .btn-primary:disabled {
            background: var(--border-color);
            cursor: not-allowed;
        }

        /* Preview */
        .preview-card {
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            background: white;
            margin-bottom: 24px;
        }

        .preview-header {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            font-size: 12px;
            color: var(--text-light);
        }

        .preview-title {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .preview-desc {
            font-size: 14px;
            color: var(--text-sub);
            line-height: 1.5;
            margin-bottom: 16px;
        }

        .preview-meta {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: var(--text-light);
        }

        .success-message {
            text-align: center;
            padding: 40px 20px;
        }

        .success-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .success-title {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .success-desc {
            color: var(--text-sub);
            margin-bottom: 24px;
        }

        @media (max-width: 768px) {
            .option-grid {
                grid-template-columns: 1fr;
            }

            .create-step {
                font-size: 11px;
            }

            .main-feed {
                padding-bottom: calc(var(--mobile-nav-height) + var(--safe-bottom) + 24px) !important;
            }
        }
    </style>
</head>

<body>

    <div id="app-header-target"></div>

    <div class="app-container">

        <div id="left-sidebar-target"></div>

        <main class="main-feed">
            <!-- Steps -->
            <div class="create-steps">
                <div class="create-step active" data-step="1">1. ì£¼ì œ ì„¤ì •</div>
                <div class="create-step" data-step="2">2. ê·œì¹™ ì„¤ì •</div>
                <div class="create-step" data-step="3">3. í™•ì¸</div>
            </div>

            <!-- Step 1: Topic -->
            <div class="step-content active" id="step-1">
                <div class="form-section">
                    <label class="form-label">
                        í† ë¡  ì£¼ì œ <span class="required">*</span>
                        <span class="char-count"><span id="title-count">0</span>/50</span>
                    </label>
                    <input type="text" id="debate-title" class="form-input" placeholder="ëª…í™•í•œ ì°¬ë°˜ì´ ê°€ëŠ¥í•œ ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                        maxlength="50">
                    <p class="form-helper">ì˜ˆ: "ì´‰ë²•ì†Œë…„ ì—°ë ¹ í•˜í–¥, ì‹¤íš¨ì„±ì´ ìˆëŠ”ê°€?"</p>
                </div>

                <div class="form-section">
                    <label class="form-label">ìƒì„¸ ë°°ê²½ (ì„ íƒ)</label>
                    <textarea id="debate-desc" class="form-textarea" rows="4"
                        placeholder="í† ë¡ ì˜ ë°°ê²½ì´ë‚˜ ì£¼ìš” ìŸì ì„ ì„¤ëª…í•´ì£¼ì„¸ìš”"></textarea>
                </div>

                <div class="form-section">
                    <label class="form-label">ì¹´í…Œê³ ë¦¬ <span class="required">*</span></label>
                    <select id="debate-category" class="form-select">
                        <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                        <option value="politics">ì •ì¹˜/ì‹œì‚¬</option>
                        <option value="society">ì‚¬íšŒ/ë¬¸í™”</option>
                        <option value="tech">IT/ê¸°ìˆ </option>
                        <option value="economy">ê²½ì œ/ê¸ˆìœµ</option>
                        <option value="life">ë¼ì´í”„ìŠ¤íƒ€ì¼</option>
                    </select>
                </div>

                <div class="btn-row">
                    <button class="btn btn-primary" onclick="goToStep(2)" id="next-btn-1" disabled>ë‹¤ìŒ ë‹¨ê³„</button>
                </div>
            </div>

            <!-- Step 2: Rules -->
            <div class="step-content" id="step-2">
                <div class="form-section">
                    <label class="form-label">í† ë¡  í˜•ì‹</label>
                    <div class="option-grid">
                        <div class="option-card selected" data-format="1v1">
                            <div class="option-icon">âš”ï¸</div>
                            <div class="option-title">1 : 1</div>
                            <div class="option-desc">ë§ì§± í† ë¡ </div>
                        </div>
                        <div class="option-card" data-format="3v3">
                            <div class="option-icon">ğŸ‘¥</div>
                            <div class="option-title">3 : 3</div>
                            <div class="option-desc">íŒ€ í† ë¡ </div>
                        </div>
                        <div class="option-card" data-format="free">
                            <div class="option-icon">ğŸ’¬</div>
                            <div class="option-title">ììœ </div>
                            <div class="option-desc">ì œí•œ ì—†ìŒ</div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <label class="form-label">ë¼ìš´ë“œë‹¹ ì‹œê°„</label>
                    <div class="time-selector">
                        <button class="time-btn" data-time="3">3ë¶„</button>
                        <button class="time-btn selected" data-time="5">5ë¶„</button>
                        <button class="time-btn" data-time="10">10ë¶„</button>
                    </div>
                </div>

                <div class="form-section">
                    <label class="form-label">ë‚˜ì˜ í¬ì§€ì…˜</label>
                    <div class="option-grid" style="grid-template-columns: 1fr 1fr;">
                        <div class="option-card selected" data-position="pro" style="border-color: #2563EB;">
                            <div class="option-icon">ğŸ‘</div>
                            <div class="option-title" style="color: #2563EB;">ì°¬ì„±</div>
                        </div>
                        <div class="option-card" data-position="con">
                            <div class="option-icon">ğŸ‘</div>
                            <div class="option-title">ë°˜ëŒ€</div>
                        </div>
                    </div>
                </div>

                <div class="btn-row">
                    <button class="btn btn-secondary" onclick="goToStep(1)">ì´ì „</button>
                    <button class="btn btn-primary" onclick="goToStep(3)">ë‹¤ìŒ ë‹¨ê³„</button>
                </div>
            </div>

            <!-- Step 3: Preview -->
            <div class="step-content" id="step-3">
                <h2 style="font-size: 18px; font-weight: 800; margin-bottom: 16px;">ë¯¸ë¦¬ë³´ê¸°</h2>

                <div class="preview-card">
                    <div class="preview-header">
                        <span class="status-badge pro">ëª¨ì§‘ì¤‘</span>
                        <span id="preview-category">â€¢ ì¹´í…Œê³ ë¦¬</span>
                        <span id="preview-format">â€¢ 1:1</span>
                    </div>
                    <h3 class="preview-title" id="preview-title">í† ë¡  ì£¼ì œ</h3>
                    <p class="preview-desc" id="preview-desc">ìƒì„¸ ë°°ê²½</p>
                    <div class="preview-meta">
                        <span id="preview-rules">3ë¼ìš´ë“œ â€¢ 5ë¶„</span>
                        <span id="preview-position">ì°¬ì„± ì¸¡</span>
                    </div>
                </div>

                <div class="form-section">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="agree-rules" style="width: 18px; height: 18px;">
                        <span style="font-size: 14px;">í† ë¡  ê·œì¹™ì— ë™ì˜í•©ë‹ˆë‹¤</span>
                    </label>
                </div>

                <div class="btn-row">
                    <button class="btn btn-secondary" onclick="goToStep(2)">ì´ì „</button>
                    <button class="btn btn-primary" onclick="submitDebate()" id="submit-btn" disabled>ê°œì„¤í•˜ê¸°</button>
                </div>
            </div>

            <!-- Success -->
            <div class="step-content" id="step-success">
                <div class="success-message">
                    <div class="success-icon">ğŸ‰</div>
                    <h2 class="success-title">ê°œì„¤ ì™„ë£Œ!</h2>
                    <p class="success-desc">ìƒëŒ€ë°© ë§¤ì¹­ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”</p>
                    <button class="btn btn-primary" onclick="MapsTo('index.html')"
                        style="max-width: 200px; margin: 0 auto;">í™ˆìœ¼ë¡œ</button>
                </div>
            </div>
        </main>

        <aside class="right-sidebar"></aside>

    </div>

    <div id="mobile-nav-target"></div>

    <script src="js/layout.js"></script>
    <script>
        let formData = { title: '', desc: '', category: '', format: '1v1', time: 5, rounds: 3, position: 'pro' };

        function goToStep(step) {
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.create-step').forEach(el => {
                el.classList.remove('active');
                if (parseInt(el.dataset.step) < step) el.classList.add('completed');
                else el.classList.remove('completed');
            });
            document.getElementById('step-' + step).classList.add('active');
            document.querySelector(`.create-step[data-step="${step}"]`).classList.add('active');
            if (step === 3) updatePreview();
            window.scrollTo(0, 0);
        }

        function validateStep1() {
            const valid = formData.title.length >= 5 && formData.category !== '';
            document.getElementById('next-btn-1').disabled = !valid;
        }

        function updatePreview() {
            const catMap = { politics: 'ì •ì¹˜/ì‹œì‚¬', society: 'ì‚¬íšŒ/ë¬¸í™”', tech: 'IT/ê¸°ìˆ ', economy: 'ê²½ì œ/ê¸ˆìœµ', life: 'ë¼ì´í”„ìŠ¤íƒ€ì¼' };
            const fmtMap = { '1v1': '1:1', '3v3': '3:3', free: 'ììœ ' };
            document.getElementById('preview-title').textContent = formData.title || 'ì£¼ì œ ì—†ìŒ';
            document.getElementById('preview-desc').textContent = formData.desc || 'ë°°ê²½ ì—†ìŒ';
            document.getElementById('preview-category').textContent = 'â€¢ ' + (catMap[formData.category] || 'ë¯¸ì„ íƒ');
            document.getElementById('preview-format').textContent = 'â€¢ ' + fmtMap[formData.format];
            document.getElementById('preview-rules').textContent = `3ë¼ìš´ë“œ â€¢ ${formData.time}ë¶„`;
            document.getElementById('preview-position').textContent = formData.position === 'pro' ? 'ì°¬ì„± ì¸¡' : 'ë°˜ëŒ€ ì¸¡';
        }

        function submitDebate() {
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.getElementById('step-success').classList.add('active');
        }

        document.getElementById('debate-title').addEventListener('input', e => {
            formData.title = e.target.value;
            document.getElementById('title-count').textContent = e.target.value.length;
            validateStep1();
        });

        document.getElementById('debate-desc').addEventListener('input', e => formData.desc = e.target.value);
        document.getElementById('debate-category').addEventListener('change', e => { formData.category = e.target.value; validateStep1(); });
        document.getElementById('agree-rules').addEventListener('change', e => document.getElementById('submit-btn').disabled = !e.target.checked);

        document.querySelectorAll('.option-card[data-format]').forEach(c => c.addEventListener('click', () => {
            document.querySelectorAll('.option-card[data-format]').forEach(x => x.classList.remove('selected'));
            c.classList.add('selected');
            formData.format = c.dataset.format;
        }));

        document.querySelectorAll('.option-card[data-position]').forEach(c => c.addEventListener('click', () => {
            document.querySelectorAll('.option-card[data-position]').forEach(x => { x.classList.remove('selected'); x.style.borderColor = ''; x.querySelector('.option-title').style.color = ''; });
            c.classList.add('selected');
            formData.position = c.dataset.position;
            const col = c.dataset.position === 'pro' ? '#2563EB' : '#DC2626';
            c.style.borderColor = col;
            c.querySelector('.option-title').style.color = col;
        }));

        document.querySelectorAll('.time-btn[data-time]').forEach(b => b.addEventListener('click', () => {
            document.querySelectorAll('.time-btn[data-time]').forEach(x => x.classList.remove('selected'));
            b.classList.add('selected');
            formData.time = parseInt(b.dataset.time);
        }));

        document.querySelectorAll('.create-step').forEach(s => s.addEventListener('click', () => {
            const n = parseInt(s.dataset.step);
            if (s.classList.contains('completed') || s.classList.contains('active')) goToStep(n);
        }));
    </script>
</body>

</html>